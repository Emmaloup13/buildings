<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Vector data in 3D</title>
    <style>
        html {
            height: 100%
        }

        body {
            height: 100%;
            margin: 0;
            overflow: hidden
        }

        #viewerDiv {
            height: 1000px;
            width: 100%;
            margin-top: 0;
            padding: 0
        }

        canvas {
            display: block
        }

        #form {
            color: #0ff;
            z-index: 10;
            background-color: #000
        }

        #all {
            flex-direction: column;
            display: flex
        }

        #Legend {
            z-index: 10000;
            width: 150px;
            height: -moz-fit-content;
            height: -moz-fit-content;
            height: fit-content;
            opacity: .8;
            background-color: #cac2c6;
            padding: 5px 5px 15px;
            position: absolute;
            top: 10px;
            right: 10px
        }

        .dot {
            height: 15px;
            width: 15px;
            border-radius: 50%;
            margin: 5px;
            display: inline-block
        }

        h3 {
            text-align: center
        }

        p {
            display: inline
        }
    </style>
</head>

<body>
    <div id="all">
        <div id="form">
            <form id="buttons"> <label for="PeriodeConstruction">PÃ©riode Construction</label> <input type="radio"
                    id="PeriodeConstruction" name="layer" value="1" checked> <label for="DPEEnergy">DPE Energy</label>
                <input type="radio" id="DPEEnergy" name="layer" value="2"> <label for="DPEGES">DPE GES</label> <input
                    type="radio" id="DPEGES" name="layer" value="3"> <label for="DateNotationDPE">Date Notation
                    DPE</label> <input type="radio" id="DateNotationDPE" name="layer" value="4"> <br> <label
                    for="ConsommationKw">Consommation Kw/an</label> <input type="radio" id="ConsommationKw" name="layer"
                    value="5"> <label for="ConsommationGas">Consommation Gaz</label> <input type="radio"
                    id="ConsommationGas" name="layer" value="6"> </form>
        </div>
        <div id="Legend"> </div>
        <div id="hidden" hidden>
            <div id="dateConstruction">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#f7fcf5"></span>
                <p> avant 1948 </p> <br> <span class="dot" style="background-color:#e2f4dd"></span>
                <p> 1949-1970 </p> <br> <span class="dot" style="background-color:#e2f4dd"></span>
                <p> 1970-1988 </p> <br> <span class="dot" style="background-color:#94d390"></span>
                <p> 1989-1999 </p> <br> <span class="dot" style="background-color:#60ba6c"></span>
                <p> 2000-2005 </p> <br> <span class="dot" style="background-color:#329b51"></span>
                <p> 2006-2012 </p> <br> <span class="dot" style="background-color:#277a3e"></span>
                <p> >2012</p> <br>
            </div>
            <div id="dpeEnergy">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#009735"></span>
                <p> A </p> <br> <span class="dot" style="background-color:#00ff59"></span>
                <p> B </p> <br> <span class="dot" style="background-color:#a8fa2d"></span>
                <p> C </p> <br> <span class="dot" style="background-color:#f3fa25"></span>
                <p> D </p> <br> <span class="dot" style="background-color:#fab91f"></span>
                <p> E </p> <br> <span class="dot" style="background-color:#fa7108"></span>
                <p> F </p> <br> <span class="dot" style="background-color:#277a3e"></span>
                <p> G</p> <br> <span class="dot" style="background-color:#aaa"></span>
                <p> no data</p> <br>
            </div>
            <div id="dpeGES">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#f0eef6"></span>
                <p> A </p> <br> <span class="dot" style="background-color:#dcdcec"></span>
                <p> B </p> <br> <span class="dot" style="background-color:#c0c1de"></span>
                <p> C </p> <br> <span class="dot" style="background-color:#a3a0cb"></span>
                <p> D </p> <br> <span class="dot" style="background-color:#8683bd"></span>
                <p> E </p> <br> <span class="dot" style="background-color:#6a51a3"></span>
                <p> F </p> <br> <span class="dot" style="background-color:#582e92"></span>
                <p> G</p> <br> <span class="dot" style="background-color:#aaa"></span>
                <p> no data</p> <br>
            </div>
            <div id="dateDPE">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#f0eef6"></span>
                <p> 2011 </p> <br> <span class="dot" style="background-color:#dcdcec"></span>
                <p> 2012 </p> <br> <span class="dot" style="background-color:#c0c1de"></span>
                <p> 2013 </p> <br> <span class="dot" style="background-color:#f7fbff"></span>
                <p> 2014 </p> <br> <span class="dot" style="background-color:#d4e8fc"></span>
                <p> 2015 </p> <br> <span class="dot" style="background-color:#8fc2de"></span>
                <p> 2016 </p> <br> <span class="dot" style="background-color:#5ba3d0"></span>
                <p> 2017</p> <br> <span class="dot" style="background-color:#3182be"></span>
                <p> 2018 </p> <br> <span class="dot" style="background-color:#105ca5"></span>
                <p> 2019 </p> <br> <span class="dot" style="background-color:#08306b"></span>
                <p> 2020</p> <br> <span class="dot" style="background-color:#aaa"></span>
                <p> no data</p> <br>
            </div>
            <div id="consoTotalGas">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#ffe3e3"></span>
                <p> 0 - 55000 litres </p> <br> <span class="dot" style="background-color:#faa"></span>
                <p> 55001 - 200000 litres</p> <br> <span class="dot" style="background-color:#ff8e8e"></span>
                <p> 200001 - 450000 litres </p> <br> <span class="dot" style="background-color:#f55"></span>
                <p> 450001 - 1000000 litres </p> <br> <span class="dot" style="background-color:red"></span>
                <p> 1000001 - 10000001 litres</p> <br> <span class="dot" style="background-color:#aaa"></span>
                <p> no data</p> <br>
            </div>
            <div id="consoTotalEnergy">
                <h3> Legend </h3> <br> <span class="dot" style="background-color:#ffe3e3"></span>
                <p> 0 - 65000 kw/an </p> <br> <span class="dot" style="background-color:#faa"></span>
                <p> 65001 - 200000 kw/an</p> <br> <span class="dot" style="background-color:#ff8e8e"></span>
                <p> 200001 - 450000 kw/an </p> <br> <span class="dot" style="background-color:#f55"></span>
                <p> 450001 - 900000 kw/an </p> <br> <span class="dot" style="background-color:red"></span>
                <p> 900001 - 10000000 kw/an</p> <br> <span class="dot" style="background-color:#aaa"></span>
                <p> no data</p> <br>
            </div>
        </div>
        <div id="viewerDiv"> </div>
    </div>
    <script src="./index.b2a512f5.js"></script>
    <script src="./index.3df26705.js"></script>
    <script
        type="text/javascript">const viewerDiv = document.getElementById("viewerDiv"); let buttons = document.getElementById("buttons"), legend = document.getElementById("Legend"), hidden = document.getElementById("hidden"); itowns.proj4.defs("EPSG:2154", "+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"); const viewExtent = new itowns.Extent("EPSG:2154", 644500, 659499.99, 6857500, 6867499.99), placement = { coord: viewExtent.center(), tilt: 12, heading: 40, range: 3e3 }, view = new itowns.PlanarView(viewerDiv, viewExtent, { placement: placement }), sourceOrtho = new itowns.WMSSource({ url: "https://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/r/wms", name: "HR.ORTHOIMAGERY.ORTHOPHOTOS", format: "image/png", crs: "EPSG:2154", extent: viewExtent }), layerOrtho = new itowns.ColorLayer("Ortho", { source: sourceOrtho }); view.addLayer(layerOrtho); const sourceDEM = new itowns.WMSSource({ url: "https://wxs.ign.fr/3ht7xcw6f7nciopo16etuqp2/geoportail/r/wms", name: "ELEVATION.ELEVATIONGRIDCOVERAGE.HIGHRES", format: "image/x-bil;bits=32", crs: "EPSG:2154", extent: viewExtent }), layerDEM = new itowns.ElevationLayer("DEM", { source: sourceDEM }); function setAltitude(e) { return null != e.altitude_sol ? e.altitude_sol + e.hauteur : 30 } function setExtrusion(e) { return e.hauteur } function setColor(e) { return new itowns.THREE.Color(11184810) } view.addLayer(layerDEM); const batsource = new itowns.FileSource({ url: "paris_centre.geojson", crs: "EPSG:2154", format: "application/json" }); let basic = new itowns.FeatureGeometryLayer("basic", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColor, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setColorDateConstruction(e) { value = e.periode_construction; let t = { "<1948": new itowns.THREE.Color(16252149), "1949-1970": new itowns.THREE.Color(14873821), "1970-1988": new itowns.THREE.Color(12641977), "1989-1999": new itowns.THREE.Color(9753488), "2000-2005": new itowns.THREE.Color(6339180), "2006-2012": new itowns.THREE.Color(3316561), ">2012": new itowns.THREE.Color(2587198) }; return null != t[value] ? t[value] : new itowns.THREE.Color(11184810) } let dateConstruction = new itowns.FeatureGeometryLayer("dateConstruction", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColorDateConstruction, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setColorDpeEnergy(e) { value = e.classe_conso_ener; let t = { A: new itowns.THREE.Color(38709), B: new itowns.THREE.Color(65369), C: new itowns.THREE.Color(11074093), D: new itowns.THREE.Color(15989285), E: new itowns.THREE.Color(16431391), F: new itowns.THREE.Color(16412936), G: new itowns.THREE.Color(16384e3), N: new itowns.THREE.Color(11184810) }; return null != t[value] ? t[value] : new itowns.THREE.Color(11184810) } let dpeEnergy = new itowns.FeatureGeometryLayer("dpeEnergy", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColorDpeEnergy, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setColorDpeGas(e) { value = e.classe_estim_ges; let t = { A: new itowns.THREE.Color(15789814), B: new itowns.THREE.Color(14474476), C: new itowns.THREE.Color(12632542), D: new itowns.THREE.Color(10723531), E: new itowns.THREE.Color(8815549), F: new itowns.THREE.Color(6967715), G: new itowns.THREE.Color(5779090), N: new itowns.THREE.Color(11184810) }; return null != t[value] ? t[value] : new itowns.THREE.Color(11184810) } let dpeGES = new itowns.FeatureGeometryLayer("dpeGES", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColorDpeGas, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setColorEnergyConso(e) { return value = e.conso_tot, 0 == value ? new itowns.THREE.Color(11184810) : value > 0 && value <= 65e3 ? new itowns.THREE.Color(16770019) : value > 65e3 && value <= 2e5 ? new itowns.THREE.Color(16755370) : value > 2e5 && value <= 45e4 ? new itowns.THREE.Color(16748174) : value > 45e4 && value <= 9e5 ? new itowns.THREE.Color(16733525) : value > 9e5 && value <= 1e7 ? new itowns.THREE.Color(16711680) : new itowns.THREE.Color(11184810) } let consoTotalEnergy = new itowns.FeatureGeometryLayer("consoTotalEnergy", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColorEnergyConso, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setColorGazConso(e) { return value = e.conso_tot_2, 0 == value ? new itowns.THREE.Color(11184810) : value > 0 && value <= 55e3 ? new itowns.THREE.Color(16770019) : value > 55e3 && value <= 2e5 ? new itowns.THREE.Color(16755370) : value > 2e5 && value <= 45e4 ? new itowns.THREE.Color(16748174) : value > 45e4 && value <= 1e6 ? new itowns.THREE.Color(16733525) : value > 1e6 && value <= 1e7 ? new itowns.THREE.Color(16711680) : new itowns.THREE.Color(11184810) } let consoTotalGas = new itowns.FeatureGeometryLayer("consoTotalGas", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setColorGazConso, base_altitude: 28, extrusion_height: setExtrusion } }) }); function setDPEdate(e) { if (null == e.date_reception_dpe) return new itowns.THREE.Color(11184810); switch (value = e.date_reception_dpe.substring(0, 4), value) { case "2013": case "2014": return new itowns.THREE.Color(16251903); case "2015": return new itowns.THREE.Color(12507373); case "2016": return new itowns.THREE.Color(9421534); case "2017": return new itowns.THREE.Color(6005712); case "2018": return new itowns.THREE.Color(3244734); case "2019": return new itowns.THREE.Color(1072293); case "2020": return new itowns.THREE.Color(536683); default: return new itowns.THREE.Color(11184810) } } let dateDPE = new itowns.FeatureGeometryLayer("dateDPE", { source: batsource, transparent: !0, opacity: .7, style: new itowns.Style({ fill: { color: setDPEdate, base_altitude: 28, extrusion_height: setExtrusion } }) }); buttons.reset(); let initialLayer = buttons.elements.layer.value; buttons.addEventListener("change", changeLayer); let layers = [dateConstruction, dpeEnergy, dpeGES, dateDPE, consoTotalEnergy, consoTotalGas]; view.addLayer(layers[initialLayer - 1]), legend.append(document.getElementById("dateConstruction")); let currentLayer = initialLayer; function changeLayer() { let e = buttons.elements.layer.value; hidden.append(document.getElementById(layers[currentLayer - 1].id)), view.removeLayer(layers[currentLayer - 1].id); let t = document.getElementById(layers[e - 1].id); legend.append(t), currentLayer = e, view.addLayer(layers[e - 1]) }</script>
</body>

</html>